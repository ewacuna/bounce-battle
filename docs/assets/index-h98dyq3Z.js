var G=Object.defineProperty;var z=(o,e,t)=>e in o?G(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var d=(o,e,t)=>(z(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();class F{constructor(e,t,i){d(this,"x");d(this,"y");d(this,"color");d(this,"lifeSpan");d(this,"velocity");d(this,"size");this.x=e,this.y=t,this.color=i,this.lifeSpan=200,this.velocity=this.randomVelocity(),this.size=Math.random()*3+1}randomVelocity(){return{x:(Math.random()-.5)*5,y:(Math.random()-.5)*5}}update(){this.x+=this.velocity.x,this.y+=this.velocity.y,this.lifeSpan-=1,this.size*=.96}draw(e){e.beginPath(),e.arc(this.x,this.y,this.size,0,Math.PI*2,!1),e.fillStyle=this.color,e.fill()}isAlive(){return this.lifeSpan>0}}const w={LinkWater:"#DDE6ED",DarkBlueGrey:"#27374D"},n=document.getElementById("mainCanvas"),a=n.getContext("2d"),N=document.getElementById("score"),s=26,M=n.width/s,x=n.height/s,b=s/2,T=10,D=w.LinkWater,B=w.DarkBlueGrey,W=w.DarkBlueGrey,H=w.LinkWater;let c=[],P=[];for(let o=0;o<M;o++){c[o]=[];for(let e=0;e<x;e++)c[o][e]=o<M/2?D:B}let m=n.width/4,p=n.height/2,S=12.5,A=-12.5,g=n.width/4*3,L=n.height/2,E=-12.5,O=12.5,I=0;const K=(o,e,t)=>{const i=(o+.5)*s,r=(e+.5)*s;for(let l=0;l<T;l++)P.push(new F(i,r,t))},R=(o,e,t)=>{a.beginPath(),a.arc(o,e,b,0,Math.PI*2,!1),a.fillStyle=t,a.fill()},U=()=>{for(let o=0;o<M;o++){const e=o*s;for(let t=0;t<x;t++){const i=t*s;a.fillStyle=c[o][t],a.fillRect(e,i,s,s)}}},q=(o,e,t,i,r)=>{let l=t,h=i;for(let u=0;u<Math.PI*2;u+=Math.PI/4){let j=o+Math.cos(u)*(s/2),k=e+Math.sin(u)*(s/2),f=Math.floor(j/s),y=Math.floor(k/s);f>=0&&f<M&&y>=0&&y<x&&c[f][y]!==r&&(c[f][y]=r,K(f,y,c[f][y]),Math.abs(Math.cos(u))>Math.abs(Math.sin(u))?l=-l:h=-h)}return{dx:l,dy:h}},X=()=>{let o=0,e=0;for(let i=0;i<M;i++)for(let r=0;r<x;r++){const l=c[i][r];l===D?o++:l===B&&e++}const t=`Light ${o} | Dark ${e}`;N.textContent=t},v=(o,e,t,i)=>(t=o+t>n.width-b||o+t<b?-t:t,i=e+i>n.height-b||e+i<b?-i:i,{dx:t,dy:i}),C=(o,e)=>{let t=Math.floor(o/s),i=Math.floor(e/s);t>=0&&t<M&&i>=0&&i<x&&(c[t][i]=D)},_=()=>{a.clearRect(0,0,n.width,n.height),U(),P=P.filter(r=>r.isAlive()),P.forEach(r=>{r.update(),r.draw(a)}),R(m,p,W);let o=q(m,p,S,A,D);S=o.dx,A=o.dy,R(g,L,H);let e=q(g,L,E,O,B);E=e.dx,O=e.dy;let t=v(m,p,S,A);S=t.dx,A=t.dy;let i=v(g,L,E,O);E=i.dx,O=i.dy,m+=S,p+=A,g+=E,L+=O,Math.abs(m-g)<s&&Math.abs(p-L)<s&&(C(m,p),C(g,L)),I++,I%1e3===0&&console.log("iteration",I),X(),requestAnimationFrame(_)};requestAnimationFrame(_);
